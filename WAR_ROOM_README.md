# ğŸ¦ˆ WAR ROOM - TIBURÃ“N PREDICTIVO

## Centro de Mando TÃ¡ctico para Dominar el Mercado de Columbus, OH

---

## ğŸ¯ **VISIÃ“N**

El **War Room** no es un dashboard - es un **palacio de cristal y acero** donde La Chaparrita controla el mercado de Ohio con un clic. TransformaciÃ³n radical del dashboard tradicional en un **centro de mando tÃ¡ctico** que respira la energÃ­a depredadora del TiburÃ³n.

---

## ğŸ”¥ **CARACTERÃSTICAS PRINCIPALES**

### 1. **EstÃ©tica Cyber-Retail**
- **Dark Theme GÃ©lido**: Refleja -21Â°C de Columbus con gradientes ice-black â†’ deep-black
- **NeÃ³n EstratÃ©gico**: Verde (#10b981) para estrellas, Rojo sangre (#ef4444) para dead stock
- **Animaciones Sutiles**: Pulse indicators, hover effects, rotating gradients
- **TipografÃ­a TÃ¡ctica**: Inter font, weight 700-800 para headers

### 2. **âš¡ PULSO PREDICTIVO - CorazÃ³n del War Room**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ¦ˆ PULSO PREDICTIVO - 31 Enero 2026
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’° CASH FLOW SNAPSHOT:
â”œâ”€ Inventario Total: $9,180.00
â”œâ”€ Productos Totales: 11
â”œâ”€ Stock CrÃ­tico: 3
â””â”€ Stockouts: 0

ğŸŒ¡ï¸ CONTEXTO CLIMÃTICO:
â”œâ”€ Columbus, OH: -9.6Â°C
â””â”€ PrÃ³ximo Feriado: Valentine's Day (14 dÃ­as)

ğŸ¯ PRÃ“XIMA ACCIÃ“N:
â””â”€ Monitorear oportunidades Instinto Depredador â†“
```

**El Sticker Predictivo domina el centro del panel**, dictando la narrativa de guerra del dÃ­a. Auto-refresh cada 60s.

### 3. **ğŸ”¥ MAPA DE CALOR - Inventario DinÃ¡mico**

Sustituye tablas aburridas por **heatmap visual** con 3 estados:

| Color | CondiciÃ³n | Criterio |
|-------|-----------|----------|
| **Verde NeÃ³n** ğŸŸ¢ | Estrella | Velocity â‰¥ 2.0/dÃ­a |
| **Naranja** ğŸŸ  | Warning | 0.5 â‰¤ Velocity < 2.0 |
| **Rojo Sangre** ğŸ”´ | Dead Stock | Velocity < 0.5/dÃ­a |

**Click en celda roja** â†’ Sugiere Parasite Bundle inmediato

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ SKU â”‚ SKU â”‚ SKU â”‚ SKU â”‚
â”‚ 150 â”‚  45 â”‚   3 â”‚  87 â”‚
â”‚ 4.5 â”‚ 2.1 â”‚ 0.0 â”‚ 1.8 â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
```

### 4. **ğŸ“Š GRÃFICOS DE ASALTO**

#### **Clima vs ROI (Chart.js Line Chart)**
VisualizaciÃ³n dual-axis que cruza:
- **Eje Y Izquierdo (Azul)**: Temperatura Columbus (Â°C)
- **Eje Y Derecho (Verde)**: ROI Proyectado (%)

**Insight:** Cuando temperatura baja, ROI sube (productos winter)

#### **Velocity Trends (Chart.js Bar Chart)**
Top 10 productos por velocity, coloreados:
- Verde: Velocity â‰¥ 2.0
- Naranja: 1.0 â‰¤ Velocity < 2.0
- Rojo: Velocity < 1.0

### 5. **ğŸ¯ INSTINTO DEPREDADOR - One-Click Actions**

SecciÃ³n dedicada a **oportunidades de captura** con botones ejecutables:

#### **ğŸ’¹ PRICE SURGE**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¹ PRICE SURGE                       â”‚
â”‚ Guantes Arctic Waterproof           â”‚
â”‚ SKU: GLOVES-ARC-01                   â”‚
â”‚ Precio Actual: $45.99                â”‚
â”‚ Precio Surge: $52.89                 â”‚
â”‚ DuraciÃ³n: 48h                        â”‚
â”‚                                      â”‚
â”‚ +18.2% ROI                           â”‚
â”‚                                      â”‚
â”‚ [ğŸš€ EJECUTAR SURGE]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Click botÃ³n** â†’ Ejecuta `POST /api/execute-price-surge` con confirmaciÃ³n

#### **ğŸ“¦ PARASITE BUNDLE**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ PARASITE BUNDLE                   â”‚
â”‚ Botas Waterproof + Sandalias Verano â”‚
â”‚ Estrella: BOOTS-WP-01 (2.8/dÃ­a)     â”‚
â”‚ Dead Stock: SANDALS-BEACH-01 (150)  â”‚
â”‚ Bundle Price: $89.99                 â”‚
â”‚ Descuento: 60%                       â”‚
â”‚                                      â”‚
â”‚ +127.5% ROI                          â”‚
â”‚                                      â”‚
â”‚ [ğŸ¯ EJECUTAR BUNDLE]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Click botÃ³n** â†’ Ejecuta `POST /api/execute-bundle` con confirmaciÃ³n

**Si no hay oportunidades:**
```
â³ Sin oportunidades activas
El TiburÃ³n espera condiciones Ã³ptimas...
```

### 6. **ğŸ“ˆ EVOLUCIÃ“N PREDICTIVA (7 dÃ­as)**

Panel de mÃ©tricas que muestra **Opportunity Cost** y aprendizaje por clics:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ $1,250              â”‚ 45                  â”‚
â”‚ Opportunity Cost 7d â”‚ Interacciones       â”‚
â”‚ -2.3% vs anterior   â”‚ +18.5% vs anterior  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 12                  â”‚ 26.7%               â”‚
â”‚ Ejecuciones         â”‚ Tasa ConversiÃ³n     â”‚
â”‚ +12 esta semana     â”‚ +4.2pp vs anterior  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MÃ©tricas Clave:**
- **Opportunity Cost 7d**: Dinero perdido por NO ejecutar sugerencias
- **Interacciones**: Clics totales en botones [Surge] [Bundle] [Reorden]
- **Ejecuciones**: Acciones confirmadas y ejecutadas
- **Tasa ConversiÃ³n**: % de clics que se convierten en ejecuciones
- **Cambios vs semana anterior**: Verde (+) o Rojo (-)

**Objetivo:** Mostrar cÃ³mo el aprendizaje por clics afila el Monte Carlo

---

## ğŸ—ï¸ **ARQUITECTURA**

### **Stack TecnolÃ³gico**
```
Frontend:
â”œâ”€ HTML5 + CSS3 (Custom Cyber-Retail Theme)
â”œâ”€ Vanilla JavaScript (ES6+)
â”œâ”€ Chart.js 4.4.1 (GrÃ¡ficos)
â””â”€ Fetch API (REST calls)

Backend:
â”œâ”€ Flask route: /war-room
â”œâ”€ API endpoints existentes:
â”‚  â”œâ”€ /api/cashflow/summary
â”‚  â”œâ”€ /api/cashflow/abc-classification
â”‚  â”œâ”€ /api/predator-suggestions
â”‚  â”œâ”€ /api/execute-price-surge
â”‚  â””â”€ /api/execute-bundle
â””â”€ Auto-refresh: 60s interval
```

### **Flujo de Datos**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   War Room UI   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ loadSticker() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /api/cashflow/summary
         â”œâ”€ loadProducts() â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º /api/cashflow/abc-classification
         â”œâ”€ loadOpportunities() â”€â”€â”€â”€â–º /api/predator-suggestions
         â””â”€ loadEvolution() â”€â”€â”€â”€â”€â”€â”€â”€â–º /api/evolution/7d (TODO)
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Render UI  â”‚
         â”‚  - Heatmap  â”‚
         â”‚  - Charts   â”‚
         â”‚  - Buttons  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼ (User clicks button)
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Execute   â”‚
         â”‚  POST /api  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Endpoints Consumidos**

| Endpoint | MÃ©todo | Uso en War Room |
|----------|--------|-----------------|
| `/api/cashflow/summary` | GET | Header stats + Sticker |
| `/api/cashflow/abc-classification` | GET | Heatmap + Velocity chart |
| `/api/predator-suggestions` | GET | Oportunidades Instinto Depredador |
| `/api/execute-price-surge` | POST | BotÃ³n "Ejecutar Surge" |
| `/api/execute-bundle` | POST | BotÃ³n "Ejecutar Bundle" |
| `/api/evolution/7d` | GET | EvoluciÃ³n Predictiva (TODO) |

---

## ğŸš€ **DEPLOYMENT**

### **Acceso**
```
ProducciÃ³n: https://tranquil-freedom-production.up.railway.app/war-room
Local: http://localhost:5000/war-room
```

### **Deployment Railway**
```bash
# 1. Agregar archivos
git add templates/war_room.html webhook_server.py WAR_ROOM_README.md

# 2. Commit
git commit -m "Feat: War Room - Centro de Mando TÃ¡ctico TiburÃ³n ğŸ¦ˆ

- EstÃ©tica Cyber-Retail (dark theme gÃ©lido -21Â°C vibes)
- Mapa de Calor dinÃ¡mico (verde neÃ³n estrellas, rojo sangre dead stock)
- GrÃ¡ficos de Asalto Chart.js (Clima vs ROI)
- Instinto Depredador one-click (Price Surge + Bundles)
- EvoluciÃ³n Predictiva (Opportunity Cost 7d)
- Sticker Predictivo como corazÃ³n del panel
- Auto-refresh 60s, responsive mobile

War Room ready para dominar Ohio con un clic ğŸ”¥"

# 3. Push
git push origin main

# 4. Verificar deployment
curl -I https://tranquil-freedom-production.up.railway.app/war-room
```

### **Testing Local**
```bash
# 1. Iniciar Flask
python webhook_server.py

# 2. Abrir War Room
open http://localhost:5000/war-room

# 3. Verificar consola browser
# DeberÃ­a mostrar:
# ğŸ¦ˆ Inicializando War Room...
# âœ… War Room inicializado
```

---

## ğŸ¨ **GUÃA DE ESTILO**

### **Paleta de Colores**
```css
--ice-black: #0a0e15      /* Background principal */
--deep-black: #111827     /* Background secundario */
--steel-gray: #1f2937     /* Secciones, cards */
--frost-gray: #374151     /* Borders, disabled */

--neon-green: #10b981     /* Estrellas, ROI positivo */
--blood-red: #ef4444      /* Dead stock, alerts */
--ice-blue: #3b82f6       /* Charts, links */
--arctic-cyan: #06b6d4    /* TÃ­tulos, accents */
--gold-predator: #f59e0b  /* Oportunidades, CTA */
--white-frost: #f9fafb    /* Texto principal */
```

### **TipografÃ­a**
```css
Familia: 'Inter', -apple-system, BlinkMacSystemFont, system-ui
Pesos: 400 (normal), 600 (semibold), 700 (bold), 800 (extrabold)

TÃ­tulos: 2rem / 800 weight / gradient cyan â†’ green
SubtÃ­tulos: 1.25rem / 700 weight / white-frost
Body: 0.875rem / 400 weight / frost-gray
MÃ©tricas: 1.5-2rem / 800 weight / arctic-cyan
```

### **Animaciones**
```css
Pulse indicator: 2s infinite (opacity + scale)
Rotate gradient: 20s linear infinite
Hover cards: 0.3s ease (transform translateY -2px)
Button active: transform translateY(0)
Spinner: 1s linear infinite rotate
```

---

## ğŸ“Š **PRÃ“XIMOS NIVELES**

### **Fase 1: Completar Endpoints** âœ… CURRENT
- [x] Sticker Predictivo
- [x] Heatmap Inventario
- [x] GrÃ¡ficos Clima vs ROI
- [x] Instinto Depredador buttons
- [ ] **TODO: `/api/evolution/7d`** (Opportunity Cost real)

### **Fase 2: Interactividad Avanzada**
- [ ] Click celda heatmap â†’ Modal detalles producto
- [ ] GrÃ¡fico interactivo (hover tooltip datos exactos)
- [ ] Filtros: timeframe 7d/30d/90d
- [ ] Toggle modo "Ejecutivo" (mÃ©tricas grandes) vs "TÃ©cnico" (tablas)

### **Fase 3: Tiempo Real**
- [ ] WebSocket para updates live (sin refresh)
- [ ] Notificaciones browser cuando nueva oportunidad
- [ ] AnimaciÃ³n cuando oportunidad ejecutada (confetti)

### **Fase 4: Mobile Optimization**
- [ ] PWA (Progressive Web App)
- [ ] Touch gestures (swipe heatmap cells)
- [ ] Mobile-first layout (grid 1 columna)

### **Fase 5: AI Insights**
- [ ] Panel "Predicciones IA" (prÃ³ximas 72h)
- [ ] Alertas predictivas: "En 3 dÃ­as stockout BOOTS-WP-01"
- [ ] ComparaciÃ³n predicciÃ³n vs real (accuracy tracking)

---

## ğŸ”§ **TROUBLESHOOTING**

### **War Room no carga (404)**
```bash
# Verificar archivo existe
ls -la templates/war_room.html

# Verificar ruta Flask
grep -n "war-room" webhook_server.py
```

### **API calls fallan (Network Error)**
```bash
# Verificar servidor Flask corriendo
curl http://localhost:5000/health

# Verificar endpoints API
curl http://localhost:5000/api/cashflow/summary
curl http://localhost:5000/api/predator-suggestions
```

### **GrÃ¡ficos no renderizan**
```javascript
// Abrir consola browser (F12)
// Verificar errores Chart.js
// Verificar CDN Chart.js cargÃ³:
console.log(Chart);
// DeberÃ­a mostrar: function Chart() {...}
```

### **Datos no se actualizan**
```javascript
// Auto-refresh estÃ¡ activo?
// Verificar en consola browser cada 60s:
// ğŸ”„ Refreshing War Room...

// Forzar refresh manual:
location.reload();
```

---

## ğŸ“š **REFERENCIAS**

### **APIs Documentadas**
- [Cash Flow API](cashflow_api.py) - Endpoints `/api/cashflow/*`
- [Market Predator](market_predator.py) - LÃ³gica Price Surge + Bundles
- [Pulse Scheduler](pulse_scheduler.py) - Sticker Predictivo generator

### **Dependencias**
- [Chart.js Docs](https://www.chartjs.org/docs/latest/)
- [Flask Routing](https://flask.palletsprojects.com/routing/)
- [CSS Grid Layout](https://css-tricks.com/snippets/css/complete-guide-grid/)

---

## ğŸ¦ˆ **FILOSOFÃA WAR ROOM**

> **"No quiero un visor de datos, quiero un centro de mando tÃ¡ctico que respire la energÃ­a de La Chaparrita."**

El War Room NO es:
- âŒ Un dashboard de mÃ©tricas
- âŒ Un panel de admin tradicional
- âŒ Tablas con scroll infinito

El War Room ES:
- âœ… Un **arma tÃ¡ctica** para dominar mercado
- âœ… Un **cerebro visual** que piensa por ti
- âœ… Un **puÃ±o de acero** que ejecuta con un clic

**Cada pixel comunica urgencia, cada mÃ©trica grita oportunidad, cada botÃ³n es un gatillo listo para disparar.**

---

## ğŸ¯ **MANTRA**

```
El TiburÃ³n no espera.
El TiburÃ³n no duda.
El TiburÃ³n EJECUTA.
```

---

**ğŸ¦ˆ War Room Ready - Domina Ohio con un clic**

*Desarrollado con visiÃ³n radical de Gemini y cirugÃ­a de Claude*
